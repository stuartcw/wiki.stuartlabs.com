
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://wiki.stuartlabs.com/Generate_Random_Quotes/">
      
      
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../feed_rss_updated.xml">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Generate Random Quotes - Stuart's Brain</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#generate-random-quotesmd" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Stuart&#39;s Brain" class="md-header__button md-logo" aria-label="Stuart's Brain" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Stuart's Brain
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Generate Random Quotes
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Stuart&#39;s Brain" class="md-nav__button md-logo" aria-label="Stuart's Brain" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Stuart's Brain
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MkDocs Help
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Info
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#download-the-quotes-file" class="md-nav__link">
    <span class="md-ellipsis">
      Download the quotes file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-cgi-web-service" class="md-nav__link">
    <span class="md-ellipsis">
      Simple CGI web service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-json-output" class="md-nav__link">
    <span class="md-ellipsis">
      Sample json output
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="generate-random-quotesmd">Generate Random Quotes.md<a class="headerlink" href="#generate-random-quotesmd" title="Permanent link">&para;</a></h1>
<h2 id="download-the-quotes-file">Download the quotes file<a class="headerlink" href="#download-the-quotes-file" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">BACKUP_FILE_DATE</span><span class="o">=</span><span class="err">`</span><span class="n">date</span> <span class="o">-</span><span class="n">r</span> <span class="n">quotes</span><span class="o">.</span><span class="n">csv</span> <span class="s2">&quot;+%m-</span><span class="si">%d</span><span class="s2">-%Y_%H_%M_%S&quot;</span><span class="err">`</span>
<span class="n">mv</span> <span class="n">quotes</span><span class="o">.</span><span class="n">csv</span> <span class="n">quotes_</span><span class="err">$</span><span class="n">BACKUP_FILE_DATE</span><span class="o">.</span><span class="s2">&quot;csv&quot;</span>
<span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gist</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">JakubPetriska</span><span class="o">/</span><span class="mi">060958</span><span class="n">fd744ca34f099e947cd080b540</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="mi">963</span><span class="n">b5a9355f04741239407320ac973a6096cd7b6</span><span class="o">/</span><span class="n">quotes</span><span class="o">.</span><span class="n">csv</span> <span class="o">-</span><span class="n">o</span> <span class="n">quotes</span><span class="o">.</span><span class="n">csv</span>
<span class="n">rm</span> <span class="n">quotes</span><span class="o">.</span><span class="n">json</span>
</code></pre></div>
<h2 id="simple-cgi-web-service">Simple CGI web service<a class="headerlink" href="#simple-cgi-web-service" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/local/bin/python3</span>
<span class="c1">#md# quote_tree.py</span>
<span class="c1">#mdA program to read a collection of quotes from a csv file and provide a CGI based JSON API to retrieve random quotes generated from the frequency data of the words and following words in the input quotes.</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#md### Import the required libraries.</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">MAX_WORD_COUNT</span><span class="o">=</span><span class="mi">10</span>

<span class="c1">#md Set the location file holding the generated quote data.</span>
<span class="n">CURRENT_FOLDER</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">QUOTE_FILE</span><span class="o">=</span><span class="n">CURRENT_FOLDER</span><span class="o">+</span><span class="s2">&quot;/quotes.json&quot;</span>

<span class="k">def</span> <span class="nf">process_quotes</span><span class="p">():</span>
    <span class="c1">#md **This function reads all the quotes afresh and returns a node graph structure eroniously called tree in a dictionary comprising of a key labeling a node and a value containing a list of the lables that a node connects to. No attempt is made remove duplicates in the lable list as this is used later to weight the chance of being selected when the random quote is created from this data.**</span>

    <span class="c1">#md Collect the authors of the quotes in a set of unique author names.</span>
    <span class="n">authors</span><span class="o">=</span><span class="nb">set</span><span class="p">()</span>

    <span class="c1">#md Read in the quotes from the CSV file. #TODO move this hardcoded path to a constant.</span>
    <span class="n">quotes</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">CURRENT_FOLDER</span><span class="o">+</span><span class="s2">&quot;/quotes.csv&quot;</span><span class="p">))</span>

    <span class="c1">#md Skip over the header which is the first line of the CSV file.</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">quotes</span><span class="p">)</span>

    <span class="c1">#md `tree` is the main data structure in the program.</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="c1">#md Iterate throught the quotes. i is the row count, row is the a tuple.</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">quotes</span><span class="p">):</span>

        <span class="c1">#md Extract the author and quote from the row data.</span>
        <span class="n">author</span><span class="p">,</span><span class="n">quote</span> <span class="o">=</span> <span class="n">row</span>

        <span class="c1">#md Add this author to set of authors.</span>
        <span class="n">authors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">author</span><span class="p">)</span>

        <span class="c1">#md We now read the words of the quote one by one. Initially there is no previous word.</span>
        <span class="n">previous_word</span><span class="o">=</span><span class="kc">None</span>
        <span class="c1">#md split the `quote` into `parts` separated by spaces.</span>
        <span class="n">parts</span><span class="o">=</span><span class="n">quote</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="c1">#md For each word in the quote, append it to the previous words list of following words.</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">previous_word</span><span class="p">:</span>
                <span class="n">tree</span><span class="p">[</span><span class="n">previous_word</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
            <span class="n">previous_word</span><span class="o">=</span><span class="n">word</span>

    <span class="c1">#md Assume that words which start a quote start with a capital letter. #TODO fix this.</span>
    <span class="n">start_words</span><span class="o">=</span><span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">==</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
    <span class="c1">#md This looks like it is not used.</span>
    <span class="n">other_words</span><span class="o">=</span><span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">!=</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>

    <span class="c1">#md Convert the set into a list as JSON doesn&#39;t no how to encode sets.</span>
    <span class="n">authors</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">authors</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tree</span><span class="p">,</span> <span class="n">start_words</span><span class="p">,</span> <span class="n">other_words</span><span class="p">,</span> <span class="n">authors</span>

<span class="k">def</span> <span class="nf">get_quote</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">start_words</span><span class="p">,</span> <span class="n">other_words</span><span class="p">,</span> <span class="n">authors</span><span class="p">):</span>
    <span class="c1">#md**A function to return a randomly generated psuedo quote based on the quote data.**</span>

    <span class="c1">#md This is the return value.</span>
    <span class="n">sentence</span><span class="o">=</span><span class="p">[]</span>
    <span class="c1">#md Choose a random word to start the sentence.</span>
    <span class="n">w</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">start_words</span><span class="p">)</span>
    <span class="n">sentence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

    <span class="c1">#md Set a limit of 100 word long sentences. This is an artibary choice but there is no guarantee that the loop will end without it.</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">):</span>
        <span class="c1">#md This `try` is probably not needed anymore but was useful in debugging. #TODO fix</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#If the word is not a node then quit. #TODO is this needed now?</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">tree</span><span class="p">:</span> 
                <span class="k">break</span>

            <span class="c1">#md Start with unpopulated word list selection.</span>
            <span class="n">wordlist</span><span class="o">=</span><span class="p">[]</span> 

            <span class="c1"># If we have reached the expected maximum length for a sentence then limit the word selection to only those which end in a full stop. This can be an empty list.  #TODO Check the word ending chars.</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="n">MAX_WORD_COUNT</span><span class="p">:</span>
                <span class="n">wordlist</span><span class="o">=</span><span class="p">[</span> <span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">tree</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="k">if</span> <span class="n">w</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span><span class="s2">&quot;.&quot;</span> <span class="p">]</span> 
            <span class="c1">#If there are no ending words defined then allow a full selection of following words.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">wordlist</span><span class="p">):</span>
                <span class="n">wordlist</span><span class="o">=</span><span class="n">tree</span><span class="p">[</span><span class="n">w</span><span class="p">]</span>

            <span class="c1">#md Choose a random word from the word list.</span>
            <span class="n">w</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">wordlist</span><span class="p">)</span>
            <span class="c1">#md Add it to the sentence.</span>
            <span class="n">sentence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
            <span class="k">break</span>

    <span class="c1">#md **Return the sentence followed by 2 newlines and a random author.**</span>
    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">authors</span><span class="p">)</span>

<span class="c1">#md This could be in a separate file.</span>
<span class="c1">#md import the CGI libraries, just for debugging.</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">import</span> <span class="nn">cgitb</span>
<span class="n">cgitb</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Content-Type: application/json; charset=utf-8</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1">#md Assume that the JSON quote file has been generated and load it.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">QUOTE_FILE</span><span class="p">))</span>
<span class="c1">#md If loading the JSON quote data fails then create it and save it, loading it into `data`. This means that the first hit may take a while to complete.</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="n">tree</span><span class="p">,</span> <span class="n">start_words</span><span class="p">,</span> <span class="n">other_words</span><span class="p">,</span> <span class="n">authors</span><span class="o">=</span><span class="n">process_quotes</span><span class="p">()</span>
    <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;tree&quot;</span><span class="p">:</span><span class="n">tree</span><span class="p">,</span> <span class="s2">&quot;start_words&quot;</span><span class="p">:</span><span class="n">start_words</span><span class="p">,</span> <span class="s2">&quot;other_words&quot;</span><span class="p">:</span><span class="n">other_words</span><span class="p">,</span> <span class="s2">&quot;authors&quot;</span><span class="p">:</span><span class="n">authors</span><span class="p">}</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">open</span><span class="p">(</span><span class="n">QUOTE_FILE</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">),</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1">#md This holds the return data.</span>
<span class="n">markov_quotes</span><span class="o">=</span><span class="p">[]</span>
<span class="c1">#md Assume the requestor wants 10 quotes.</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">markov_quotes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_quote</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;tree&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;start_words&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;other_words&quot;</span><span class="p">],</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;authors&quot;</span><span class="p">]))</span>
<span class="c1">#md return them via HTTP JSON response.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;quotes&quot;</span><span class="p">:</span><span class="n">markov_quotes</span><span class="p">},</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</code></pre></div>
<h2 id="sample-json-output">Sample json output<a class="headerlink" href="#sample-json-output" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;quotes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;This is always in turning the gate, you one who can write it. If you plant.\n\nJohn Locke&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;First say is one from them. That is how to him. When there quickly. Do not lazy. They must flow. To be defeated.\n\nBilly Wilder&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;A good plan is not as silence.\n\nDenis Waitley&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Chaos is essential is a prisoner was so too. If you start living.\n\nRalph Emerson&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Much wisdom to go on huge, dramatic change. If you do a process. We get back. Something makes the reward.\n\nSinvyest Tan&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Natures delight.\n\nJean de la Fontaine&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Faith in life is not a victor.\n\nNiccolo Machiavelli&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Know that which is shaped.\n\nEdward Ericson&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Formula for success is a great is what he aspires to himself. Therefore, all cases.\n\nWilliam Sloane Coffin&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;Liberty, taking a sign of most important than a sum up of rubber. All children all success. If we change. Some people are. Our greatness is mighty.\n\nThich Nhat Hanh&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><br><hr><em>Hello world!</em> from <code>on_page_markdown.py</code></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>